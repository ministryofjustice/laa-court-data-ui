%table.govuk-table
  %caption.govuk-table__caption.govuk-visually-hidden
    = t('search.result.caption')
  %thead.govuk-table__head
    %tr.govuk-table__row
      %th.govuk-table__header{ scope: 'col' }= t('search.result.defendant.name')
      %th.govuk-table__header{ scope: 'col' }= t('search.result.defendant.prosecution_case_reference')
      %th.govuk-table__header{ scope: 'col' }= t('search.result.defendant.date_of_birth')
      %th.govuk-table__header{ scope: 'col' }= t('search.result.defendant.national_insurance_number')
      %th.govuk-table__header{ scope: 'col' }= t('search.result.defendant.arrest_summons_number')
  %tbody.govuk-table__body
    - @results.each do |defendant|
      %tr.govuk-table__row
        %td.govuk-table__cell
        - if defendant.linked?
          = link_to defendant.name, edit_defendant_path(defendant.arrest_summons_number || defendant.national_insurance_number)
        - else
          = link_to defendant.name, new_laa_reference_path(defendant.arrest_summons_number || defendant.national_insurance_number)

        %td.govuk-table__cell
          = link_to defendant.prosecution_case_reference, prosecution_case_path(defendant.prosecution_case_reference)
        %td.govuk-table__cell
          = l(defendant.date_of_birth&.to_date)
        %td.govuk-table__cell
          = defendant.national_insurance_number
        %td.govuk-table__cell
          = defendant.arrest_summons_number
