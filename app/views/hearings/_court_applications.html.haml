%h2.govuk-heading-l
  = t('hearings.show.court_applications.heading')
- if hearing&.court_applications.present?
  .govuk-accordion{:data => {:module => "govuk-accordion"}, :id => "accordion-" + hearing.id}
    - decorate_each(hearing.court_applications) do |court_application|
      .govuk-accordion__section
        .govuk-accordion__section-header
          %h3.govuk-accordion__section-heading
            %span.govuk-accordion__section-button
              = court_application&.type&.description || t('generic.not_available')
          .govuk-accordion__section-summary.govuk-body
            = l(court_application.received_date&.to_date, :format => :long)
        .govuk-accordion__section-content.govuk-details__text
          - key_class = {}
          - value_class = {class: "vcd-capitalize-first-letter"}
          %dl.govuk-summary-list
            = govuk_summary_list_entry(t('hearings.show.court_applications.received_date'), l(court_application.received_date&.to_date, :format => :long), key_class, value_class)
            = govuk_summary_list_entry(t('hearings.show.court_applications.type'), court_application&.type&.description || t('generic.not_available'), key_class, value_class)
            = govuk_summary_list_entry(t('hearings.show.court_applications.code'), court_application&.type&.code || t('generic.not_available'), key_class, value_class)
            = govuk_summary_list_entry(t('hearings.show.court_applications.legislation'), court_application&.type&.legislation  || t('generic.not_available'), key_class, value_class)
            - court_application.judicial_results&.each do |result|
              = govuk_summary_list_entry(t('hearings.show.court_applications.result_codes'), result&.cjs_code || t('generic.not_available'), key_class, value_class)
              - if result&.text.present?
                = govuk_summary_list_entry(t('hearings.show.court_applications.result_text'), transform_and_sanitize(result&.text), key_class, value_class)
              - else
                = govuk_summary_list_entry(t('hearings.show.court_applications.result_text'), t('generic.not_available'), key_class, value_class)
            = govuk_summary_list_entry(t('hearings.show.court_applications.respondent_synonyms'), court_application.respondent_list, key_class, value_class)
            = govuk_summary_list_entry(t('hearings.show.court_applications.applicant_synonym'), court_application.applicant_synonym, key_class, value_class)

- else
  %p.govuk-body
    = t('hearings.show.court_applications.none')
